Публикации
============================

Режим добавления и редактирования новости изменился и имеет более информативный вид

# Добавления публикации
![](images/history/public_1.jpg){.img-fluid}

Были добавлены вкладки для удобной навигации. Расмотрим их:

Внизу станицы не которые плагины могут подключются по **extends.owner**
![](images/history/public_1.0.jpg){.img-fluid}

Другие плагины могут подключаться по **extends.sidebar** которые будут отображаться с правой стороны в сайдбаре
![](images/history/public_1.00.jpg){.img-fluid}

![](images/history/public_1.1.jpg){.img-fluid}
Вкладка Мета, на этой вкладки будут подключаться плагины по **extends.meta** здесь можно задать SEO для страницы

![](images/history/public_1.2.jpg){.img-fluid}
Вкладка Дополнительно, здесь также подключаются плагины по **extends.additional** и несут дополнительные функции

![](images/history/public_1.3.jpg){.img-fluid}
Вкладка Доступ, была добавлена специальная функция для управления группами пользователей, для которых можно запретить просмотр к данной публикации.
При создании новой группы, то она в этот раздел попадает автоматически и если к примеру: запретили группе **4** просмотр публикации, то страница также не будет доступна пользователем которые быле не авторизованы в системе.

# Поиск дубликатов новости
![](images/history/public_2.1.jpg){.img-fluid}

# Новые BB КОДЫ
Обновился parse.class.php были добавлены новые переменные:
![](images/history/public_2.2.jpg){.img-fluid}

-   **[color=#...]** ... **[/color]** - цвет текста
-   **[bgcolor=#...]** ... **[/bgcolor]** - цвет фона
-   **[ustyle=#...]** ... **[/ustyle]** - цвет блока
-   **[size=...]** ... **[/size]** - Размер текста
-   **[font=...]** ... **[/font]** - Шрифт
Изменен спойлер поддерживает текст в spoiler=здесь текст
-   **[spoiler]** ... **[/spoiler]** - или теперь так можно **[spoiler=ОПИСАНИЕ]** ... **[/spoiler]**
Всплывающие окна для вставки url, img, email

Новые теги
-   **[hr]** - дивидер
-   **[small]** ... **[/small]** - маленький текст
-   **[sub]** ... **[/sub]** - нижний / подстрочный индекс
-   **[sup]** ... **[/sup]** - надстрочный индекс

# Смена автора публикации
![](images/history/public_2.3.jpg){.img-fluid}
Появилась возможность сменить автора публикации новости на другого автора. При редактировании будет произведен поиск всех зарегестрированных пользователей из списка.
Если сменить автора публикации на другого, то счетчик новостей также измениться на (-1) сменяемого на (+1) заменяемого и на оборот, пользователя в БД.
Если не заменять автора публикации, то в системе данный пункт не доступен и не производит запросы, то есть остается как и было раньше.

# Фиксирование новостей
Добавлена функция, которая зафиксирует новость вверх и станет первой в списке других. При добавлении или редактировании новости будет доступен чекбокс. 
А также в шалоне вашей темы в файле news.short.tpl и news.full.tpl доступны теги:
```html
[fixed]....[/fixed]
```
Пример использования:
В файл шаблона news.short.tpl вставить в обвертывания класс:
```html
class="[fixed]fixed_story[/fixed]"
```
Чтоб получилось примерно так:
```html
<article class="box short[fixed] fixed_story[/fixed]">
... здесь содержимое стиля short
</article>
```
В стилях css сайта прописать
```html
.fixed_story { z-index: 1; }
```

# Запретить индексацию страницы для поисковиков
Теперь при добавлении или редактировании публикации появилась возможность вкл/выкл индексировании страницы. Был добавлен новый системный тег:
```html
$SYSTEM_FLAGS['meta']['robots']
```
Который отвечает за вывод между ``` <head> </head> ```
```html
<meta name="robots" content="noindex,nofollow">
```
При активации этой функции в новости будут выводится сниппеты:
noindex – запрещает индексацию страницы.
nofollow – запрещает роботу следовать по ссылкам на странице и индексировать.

Для разработчиков появилась новая возможность с ним работать.

# Исключить из поиска по сайту
При активации данной функции публикация выпадет из результатов поиска по сайту.

# Новые теги для статистических страниц

- ```[print-link][/print-link]``` текст заключенный в эти теги станет ссылкой на печать
- ```[edit-static] [/edit-static]``` текст заключенный в эти теги станет ссылкой редактирования
- ```[del-static] [/del-static]``` текст заключенный в эти теги станет ссылкой удаления данной страницы

# Подключения к статистическим страницам

К статистическим страницам был добавлен ```extends``` для подключения плагинов.

# Новая система загрузки изображений в новость

![](images/history/public_3.0.jpg){.img-fluid}
Появилась возможность загружать и удалять картинки без перезагрузки страниц
![](images/history/public_3.1.jpg){.img-fluid}
Была добавлена кнопка для вызова загрузки изображений в модальном окне
![](images/history/public_3.2.jpg){.img-fluid}
Каждая загруженная картинка прописывается к новости. Каждую загруженную картинку можно будет вставить в новость при помощи специальных кнопок
![](images/history/public_3.3.jpg){.img-fluid}
При редактировании новости, все загруженные картинки к ней, будут отображаться именно для этой новости.
![](images/history/public_3.4.jpg){.img-fluid}

# Новая TWIG функция
Добавлена новая функция TWIG это cdate, которая считает время относительно добавленого на сайт данных, к примеру (только что, ```1``` час назад, ```1``` день наза и так далее)
Пример использования:
```{{ data|cdate }}```

# Новый тег для полной новости

{ datePublished }} - формировании даты в полной новости в формат ```2023-11-25``` который служит для микроразметки Schema
Пример использования:
```
<time datetime="{{ datePublished }}" class="grey" itemprop="datePublished">{{ news.date }}</time>
```

# Новая система загрузки файлов в новость

Появилась возможность без перезагрузки страниц загружать и удалять файлы.
![](images/history/public_3.5.jpg){.img-fluid}
При загрузке определяется тип файла и отображается его миниаютюра, если таковой не имеется, то можно закинуть картинку формата png с именем данного расширенния по пути:
```
engine\skins\default\images\filetypes\
```
Например: ```torrent.png```
И не забудьте добавить это расширение в список одобренных для загрузки в настройках системы.

Данная загрузка файлов вызывается через модальное окно и объеденнена вместе с функцией загрузкой изображений.
![](images/history/public_3.1.jpg){.img-fluid}

© 2008-2022 Next Generation CMS